-- MySQL Script generated by MySQL Workbench
-- Thursday March 19
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema spots
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema spots
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `spots` DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ;
USE `spots` ;


-- -----------------------------------------------------
-- Table `spots`.`Driver`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spots`.`Driver` ;

CREATE TABLE IF NOT EXISTS `spots`.`Driver` (
  userId INT(11) NOT NULL AUTO_INCREMENT,
  username VARCHAR(25) NOT NULL, 
  fName VARCHAR(25) NULL,
  lName VARCHAR(25) NULL,
  email VARCHAR(30) NULL,
  password VARCHAR(15) NOT NULL,
  street VARCHAR(30) NULL,
  city VARCHAR(20) NULL,
  state VARCHAR(15) NULL,
  zip int(5) NULL,
  phone VARCHAR(10) NULL,
  PRIMARY KEY (`userId`))
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `spots`.`Vehicle`
-- -----------------------------------------------------

DROP TABLE IF EXISTS `spots`.`Vehicle`;

CREATE TABLE IF NOT EXISTS `spots`.`Vehicle` (
  licensePlate VARCHAR(11) NOT NULL, 
  carMake VARCHAR(25) NULL, 
  carModel VARCHAR(25) NULL, 
  userId INT(11) NOT NULL,
  PRIMARY KEY (`licensePlate`, `userId`),
  FOREIGN KEY (userId) references Driver(userId))
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `spots`.`Homeowner`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `spots`.`Homeowner` ;

CREATE TABLE IF NOT EXISTS `spots`.`Homeowner` (
  `userId` INT(11) NOT NULL AUTO_INCREMENT, 
  `username` VARCHAR(25) NOT NULL,
  `fName` VARCHAR(25) NULL,
  `lName` VARCHAR(25) NULL,
  `email` VARCHAR(30) NULL,
  `password` VARCHAR(15) NOT NULL,
  `phone` VARCHAR(10) NULL,
  PRIMARY KEY (userId))
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `spots`.`Home`
-- -----------------------------------------------------

DROP TABLE IF EXISTS `spots`.`Home`;

CREATE TABLE IF NOT EXISTS `spots`.`Home` (
  homeId INT(11) NOT NULL AUTO_INCREMENT,
  userId INT(11) NOT NULL, 
  address VARCHAR(50) NOT NULL, 
  city VARCHAR(50) NOT NULL, 
  state VARCHAR(2) NOT NULL, 
  zipcode VARCHAR(5) NULL, 
  eventId INT(11) NULL, 
  PRIMARY KEY (homeId),
  FOREIGN KEY (userId) references Homeowner(userId), 
  FOREIGN KEY (eventId) references Events(eventId))
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `spots`.`Spots`
-- -----------------------------------------------------

DROP TABLE IF EXISTS `spots`.`Spots`;

CREATE TABLE IF NOT EXISTS `spots`.`Spots` (
  spotId INT(11) NOT NULL AUTO_INCREMENT,
  homeId INT(11) NOT NULL,
  price FLOAT NULL, 
  taken BOOL,
  license VARCHAR(7) NULL,
  PRIMARY KEY (spotId, homeId), 
  FOREIGN KEY (homeId) references Home(homeId),
  FOREIGN KEY (license) references Vehicle(licensePlate))
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `spots`.`Events`
-- -----------------------------------------------------

DROP TABLE IF EXISTS `spots`.`Events` ;

CREATE TABLE IF NOT EXISTS `spots`.`Events` (
  eventId INT(11) NOT NULL AUTO_INCREMENT,
  `eventname` VARCHAR(50) NOT NULL, 
  `startDate` VARCHAR(10) NOT NULL, 
  `startTime` timestamp NULL, 
  `endDate` VARCHAR(10) NOT NULL,
  `endTime` timestamp NULL, 
  `category` VARCHAR(25) NOT NULL, 
  `address` VARCHAR(50) NOT NULL,
  `city` VARCHAR(20) NOT NULL, 
  `state` VARCHAR(2) NOT NULL, 
  `zipcode` INT(5) NOT NULL, 
  PRIMARY KEY (eventId))
ENGINE = InnoDB;

-- Insert Events into table
INSERT INTO Events values(1, "SMU Basketball Game", '2015-03-29', NULL, '2015-03-30', NULL, "Basketball", "6024 Airline Road", "Dallas", "TX", 75275);
INSERT INTO Events values(2, "SMU Football Game", '2015-09-15', NULL, '2015-09-16', NULL, "Football", "5801 Airline Road", "Dallas", "TX", 75275);
INSERT INTO Events values(3, "Meadows Dance Recital", '2015-04-02', NULL, '2015-04-03', NULL, "Dance", "6101 Bishop Boulevard", "Dallas", "TX", 75205);
INSERT INTO Events values(4, "Basketball", '2015-04-11', NULL, '2015-04-12', NULL, "Basketball", "810 Barton Creek Drive", "Dripping Springs", "TX", 78620);
INSERT INTO Events values(5, "ACL", '2015-04-10', NULL, '2015-04-20', NULL, "Music", "2100 Barton Springs Road", "Austin", "TX", 78704);
INSERT INTO Events values(6, "Rangers Game", '2015-05-01', NULL, '2015-05-01', NULL, "Baseball", "1000 Ballpark Way", "Arlington", "TX", 76011);
INSERT INTO Events values(7, "Express Game", '2015-06-02', NULL, '2015-06-03', NULL, "Baseball", "3400 East Palm Valley Boulevard", "Round Rock", "TX", 78665);

-- Insert Parking places

INSERT INTO Homeowner values(1, "Binkley Garage", NULL, NULL, NULL, "smu1", "2148583215");
INSERT INTO Home values(1, 1, "3105 Binkley Avenue", "Dallas", "TX", "75275", 2);
INSERT INTO Spots values(1, 1, 25.00, false, NULL);
INSERT INTO Spots values(2, 1, 25.00, false, NULL);
INSERT INTO Spots values(3, 1, 25.00, false, NULL);
INSERT INTO Spots values(4, 1, 25.00, false, NULL);
INSERT INTO Spots values(5, 1, 25.00, false, NULL);

INSERT INTO Homeowner values(2, "Moody Garage", NULL, NULL, NULL, "smu2", "2147994132");
INSERT INTO Home values(2, 2, "3063 SMU Boulevard", "Dallas", "TX", "75275", 1);
INSERT INTO Spots values(1, 2, 25.00, false, NULL);
INSERT INTO Spots values(2, 2, 25.00, false, NULL);
INSERT INTO Spots values(3, 2, 25.00, false, NULL);
INSERT INTO Spots values(4, 2, 25.00, false, NULL);
INSERT INTO Spots values(5, 2, 25.00, false, NULL);

-- Insert Driver info
INSERT INTO Driver values(1, "egabrielsen", "Erik", "Gabrielsen", "erik.gabe@gmail.com", "sharpclaw", "810 Barton Creek Drive", "Dripping Springs", "TX", 78620, "5127871391");
INSERT INTO Driver values(2, "spotsuser", "John", "Doe", "john.doe@gmail.com", "spots123", "6004 Bishop Boulevard", "University Park", "TX", 75275, "2141234567");

-- Insert Drivers vehicles
INSERT INTO Vehicle values("123EGAB", "Chevy", "2004 Black Tahoe", 1);
INSERT INTO Vehicle values("456ERIK", "Dodge", "2008 Silver Ram 1500", 1);
INSERT INTO Vehicle values("1SPOT1", "Honda", "2013 Blue CR-V", 2);




SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
